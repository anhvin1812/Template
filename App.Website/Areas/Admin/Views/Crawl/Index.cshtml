@using System.Web.Optimization
@using App.Core.News
@using App.Services.Dtos.NewsManagement
@using PagedList.Mvc
@model PagedList.StaticPagedList<NewsSummary>
@{
    ViewBag.Title = "Crawl Articles";
    var filters = (NewsFilter)ViewBag.Filters;
}

@section AddStyles{
    <!-- Bootstrap-toggle -->
    @Styles.Render("~/Areas/Admin/Scripts/bootstrap-toggle/bootstrap-toggle.min.css")
}

@section ContentHeader
{
<section class="content-header">
    <h1>
        News Management
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li>News Management</li>
        <li class="active">News</li>
    </ol>
</section>
}

<div class="box box-primary">
    <div class="box-header with-border">
        <div class="row">
            <div id="validation-messages" class="col-xs-12"></div>
        </div>
        @using (Html.BeginForm("Scan", "Crawl", FormMethod.Post, new { id = "formCrawlFilter" }))
        {
        <div class="row">
                <div class="col-sm-3 col-md-2">
                    <div class="form-group">
                        @Html.DropDownList("CrawlSourceId", (SelectList)ViewBag.CrawlSources, "Select site", new { @class = "form-control input-sm select2", style = "width: 100%;", id = "ddlCrawlSources" })
                    </div>
                </div>
                <div class="col-sm-3 col-md-2">
                    <div class="form-group">
                        @Html.DropDownList("CrawlSourcePageIds", new List<SelectListItem>(), new { @class = "form-control select2", id = "ddlCrawlSourcePages",  data_placeholder = "Select pages", multiple = "multiple", style = "width: 100%;" })
                    </div>
                </div>
                <div class="col-sm-3 col-md-2">
                    <div class="form-group">
                        @Html.TextBox("Keyword", "", new { @class = "form-control", placeholder ="Keyword"})
                    </div>
                </div>
                <div class="col-sm-3 col-md-2">
                    <button type="submit" class="btn btn-default btn-sm"><i class="fa fa-search"></i> Scan</button>
                </div>
        </div>
        }
        @Html.Hidden("GetPagesUrl", Url.Action("Pages", "Crawl"), new { id = "hdGetPagesUrl" })
        @Html.Hidden("GetArticleDetailUrl", Url.Action("GetArticleDetail", "Crawl"), new { id = "hdGetArticleDetailUrl" })
        @Html.Hidden("PreviewUrl", Url.Action("Preview", "Article", new { area = "" }), new { id = "hdPreviewUrl" })

    </div><!-- /.box-header -->
    <div class="box-body">
    </div>  <!-- /.box-body -->
   
</div><!-- /.box -->

<div class="box box-primary">
    <div class="box-header with-border">Results</div><!-- /.box-header -->
    <div class="box-body">
        <table id="tblCrawlResults" class="table table-hover table-striped">
            @*<thead>
                <tr>
                    <th></th>
                    <th>Title</th>
                    
                    <th></th>
                </tr>
            </thead>*@
            <tbody></tbody>
        </table>

    </div><!-- /.box-body -->
    <div id="crawlLoading" class="overlay hide">
        <i class="fa fa-refresh fa-spin"></i>
    </div>
    @*<div class="box-footer clearfix">
            @Html.PagedListPager(Model, page => Url.Action("Index", new {keyword = filters.Keyword, categotyId = filters.CategoryId, statusId=filters.StatusId, hot=filters.IsHot, featured = filters.IsFeatured, page = page }), new PagedListRenderOptions { ContainerDivClasses = new [] { "no-margin","pull-right" }  })
        </div>*@
</div>
<!-- /.box -->


@section AddScripts{
    <!-- DataTables -->
    @*@Scripts.Render("~/Admin/Js/dataTable")*@

    <!-- jQuery-validate -->
    @Scripts.Render("~/Admin/Js/jqueryval")
    <!-- CKEditor. -->
    @Scripts.Render("~/ckeditor/ckeditor.js")
    <!-- Select2 -->
    @Scripts.Render("~/Areas/Admin/Scripts/select2/select2.full.min.js")
    <!-- Bootstrap-toggle -->
    @Scripts.Render("~/Areas/Admin/Scripts/bootstrap-toggle/bootstrap-toggle.min.js")
    <!-- DataTables -->
    @Scripts.Render("~/Areas/Admin/Scripts/App/select2.js", "~/Areas/Admin/Scripts/App/crawl.js")
}

